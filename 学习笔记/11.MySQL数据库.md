# 了解数据库

## 数据库介绍

**数据库就是指数据存储的库，作用就是组织数据并存储数据**
## 数据库软件
数据库软件就是提供库->表->数据，这种数据组织形式的工具软件，也
称之为<u>数据库管理系统</u>
以**MySQL**软件为基础进行学习  [MySQL :: Download MySQL Installer](https://dev.mysql.com/downloads/installer/)
## 数据库组织数据

**按照:库->表->数据 三个层级进行组织**
## 数据库和SQL的关系

**数据库（软件）提供数据组织存储的能力**
**SQL语句则是操作数据、数据库的工具语言。适用于绝大多数数据库软件**
## SQL数据库管理工具
[DBeaver](https://dbeaver.io/download/)
# 使用MySQL

打开命令提示框，输入：`mysql -uroot -p` 回车输入密码进入命令行环境
## 语句说明
## SQL基础语法
| 语句 | 说明 |
| ---- | ---- |
| `mysql -uroot -p` | 输密码后回车进入命令行环境 |
| `show databases;` | 查看或显示数据库 |
| `use <库名>;` | 使用数据库 |
| `show tables;` | 列出数据库中的表 |
## 注释
```
单行注释: 
-- 注释内容(--后面一定要有一个空格)
单行注释:
# 注释内容(# 后面可以不加空格，推荐加上)
多行注释:
/*
注释内容
*/
```
# SQL语言分类
## DDL 数据定义
### 数据库管理语法
#### 查看数据库
```mysql
show databases
```
#### 使用数据库
```mysql
use 数据库名称;
```
#### 创建数据库
```mysql
create database 数据库名称 [charset utf8];
					     # []内容为非必填
```
#### 删除数据库
```mysql
drop database 数据库名称;
```
#### 查看当前使用的数据库
```mysql
select database();
```
### 数据表管理语法
#### 查看有哪些表
```mysql
show tables;
# 需要先选择数据库
```
#### 删除表
```mysql
drop table 表名;
```
#### 创建表
```mysql
create table 表名(
	列表名 列类型,
	列表名 列类型
	······
);
```
##### 列类型
| int | 整数 |
| ---- | ---- |
| float | 浮点数 |
| varchar(长度) | 文本，长度为数字，做最大限制 |
| date | 日期类型 |
| timestamp | 时间戳类型 |


![类型](https://hew666.github.io/self-python/学习笔记/pic/学习/9.MySQL数据库/类型.png)

## DML 数据操作
> 字符串的值，出现在SQL语句中，必须要用单引号包围起来
> 条件判断 操作符 = < > <= >= !=
### 插入
> 插入列，id为1、2、3
```mysql
insert into student(id) values(1),(2),(3);
```
> 插入id、name、age
```mysql
insert into student values(1, '李四', 24), (2, '陈六', 25);
```
### 删除
> 删除id小于或等于3的数据
```mysql
delete from student where id <= 3;
```
> 删除student表里的所有数据
```mysql
delete from student;
```
### 更新
> 把id等于1的数据name更新为 陈六
```mysql
update student set name = '陈六' where id = 1;
```
> 把所有人的age修改为66
```mysql
update student set age = 66;
```
## DQL 数据查询
| ID | name | age | gender |
| ---- | ---- | ---- | ---- |
| 1 | 张三 | 25 | 女 |
| 2 | 李四 | 30 | 男 |
| 3 | 王五 | 28 | 男 |
| 4 | 赵六 | 22 | 女 |
| 5 | 小红 | 35 | 女 |
| 6 | 小明 | 27 | 男 |
| 7 | 小丽 | 29 | 女 |
| 8 | 小华 | 32 | 男 |
| 9 | 小刚 | 26 | 女 |
| 10 | 小芳 | 31 | 男 |
### 基础查询
`*`表示获取表里所有内容
> 查看student中所有数据
```mysql
select 列表|* from student;
```
**上述代码解释含义**：*从（from）表中，选择（select）某些列进行展示*
这里执行代码 `select name from student;`

| name |
| ---- |
| 张三 |
| 李四 |
| 王五 |
| 赵六 |
| 小红 |
| 小明 |
| 小丽 |
| 小华 |
| 小刚 |
| 小芳 |

---
> 高级查询语法:
```mysql
select 列表|* from student where age >25;
```

这里执行代码 `select id, name,age from student where age >28;`

| id | name | gender |
| ---- | ---- | ---- |
| 2 | 李四 | 男 |
| 5 | 小红 | 女 |
| 7 | 小丽 | 女 |
| 8 | 小华 | 男 |
| 10 | 小芳 | 男 |
> 查询年龄大于28岁的人，并列出ID，姓名，性别

---
### 分组聚合
> `select 字段|聚合函数 from [where 条件] group by 列`
```mysql
select gender, avg(age), sum(age), min(age), max(age), count(*) from student group by gender;
```
输出结果如下：**男女的年龄平均值，综合值，最小值，最大值，求数值**


| gender | avg(age) | sum(age) | min(age) | max(age) | count(name) |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 女 | 27.4 | 137 | 22 | 35 | 5 |
| 男 | 29.6 | 148 | 27 | 32 | 5 |
### 排序分页
- WHERE、GROUP BY、ORDER BY、LIMIT均可按需求省略
- SELECT 和 FROM 是必写的
- 执行顺序:FROM ->WHERE ->GROUP BY和聚合函数->SELECT ->ORDER BY ->LIMIT
#### 升序和降序
> 如果不填[ASC | desc]则默认升序
```mysql
select * from 表名 where age > 20 order by age [ASC | desc];
```
> 20条数据，采用降序排序

| ID | name | age | gender |
| ---- | ---- | ---- | ---- |
| 5 | 小红 | 35 | 女 |
| 14 | 李四 | 35 | 女 |
| 20 | 刘十 | 34 | 女 |
| 17 | 郑七 | 33 | 男 |
| 8 | 小华 | 32 | 男 |
| 10 | 小芳 | 31 | 男 |
| 18 | 王八 | 31 | 女 |
| 2 | 李四 | 30 | 男 |
| 12 | 钱二 | 30 | 女 |
| 7 | 小丽 | 29 | 女 |
| 16 | 吴六 | 29 | 女 |
| 3 | 王五 | 28 | 男 |
| 13 | 孙三 | 28 | 男 |
| 6 | 小明 | 27 | 男 |
| 15 | 周五 | 27 | 男 |
| 9 | 小刚 | 26 | 女 |
| 19 | 朱九 | 26 | 男 |
| 1 | 张三 | 25 | 女 |
| 11 | 赵一 | 25 | 男 |
| 4 | 赵六 | 22 | 女 |
#### 分页
> 只填一个数(n)只展示5条数据。n填10，m填5：则从11开始往后展示5条
```mysql
select * from student limit n[, m];
```

| ID | name | age | gender |
| ---- | ---- | ---- | ---- |
| 1 | 张三 | 25 | 女 |
| 2 | 李四 | 30 | 男 |
| 3 | 王五 | 28 | 男 |
| 4 | 赵六 | 22 | 女 |
| 5 | 小红 | 35 | 女 |
> 查询年龄大于25的并列出5条已有数据，统计每个年龄段共有几人
```mysql
select age, count(*) from student where age > 25 group by age
order by age limit 5;
```

| age | count(*) |
| ---- | ---- |
| 26 | 2 |
| 27 | 2 |
| 28 | 2 |
| 29 | 2 |
| 30 | 2 |
## DCL 数据控制
暂无学习


# Python操作MySQL
> 安装 **pymysql**
```
pip install pymysql
```