# JSON
- JSON可以直接和Python的字典或列表进行无缝转换。
```python
import json  
  
data_list = [{"name": "张三", "ege": "20"}, {"name": "李四", "ege": "24"}, {"name": "王五", "ege": "25"}]  
# 把Python数据转为json数据  
data = json.dumps(data_list, ensure_ascii=False)  
print(type(data))  
print(data)  
  
# 把json数据转为Python数据  
data = json.loads(data)  
print(type(data))  
print(data)
```
# pyecharts


[pyecharts - A Python Echarts Plotting Library built with love.](https://pyecharts.org/#/zh-cn/)

[中文简介 - 画廊](https://gallery.pyecharts.org/#/README)

> Echart 是个由百度开源的数据可视化，凭借着良好的交互性，精巧的图表设计，得到了众多开发者的认可。而 Python 是门富有表达力的语言，很适合用于数据处理当数据分析遇上数据可视化时pyecharts 诞生了
---
## 可视化图

### 折线图GPD展示
```python
# 导包，导入Line的功能构建折线图对象  
from pyecharts.charts import Line  
from pyecharts.options import TitleOpts, LegendOpts, ToolboxOpts, VisualMapOpts  
# 得到折线图对象  
line = Line()  
# 添加X轴数据  
line.add_xaxis(["中国", "美国", "日本"])  
# 添加Y轴数据  
line.add_yaxis("GDP", [30, 20, 10])  
  
# 设置全局配置项 et_global_optsline.set_global_opts(  
    title_opts=TitleOpts(title="GPD展示", pos_left="center", pos_bottom="1%"),  # 标题,左侧的距离,下侧的距离  
    legend_opts=LegendOpts(is_show=True),  # 图例显示，默认显示  
    toolbox_opts=ToolboxOpts(is_show=True),  # 工具箱是否显示  
    visualmap_opts=VisualMapOpts(is_show=True),  # 视觉映射是否显示  
)  
  
# 通过render方法，将代码生成为图像  
line.render()
```

![折线图GPD展示](https://hew666.github.io/self-python/学习笔记/Excalidraw/picture/折线图GPD显示.png)

---
### 2020年美日印三国确诊人数对比折线图
```Python
import json  
from pyecharts.charts import Line  
from pyecharts.options import TitleOpts, LabelOpts  
  
# 打开文件  
f_us = open("数据/美国.txt", "r", encoding="UTF-8")  
us_data = f_us.read()  
  
f_jb = open("数据/日本.txt", "r", encoding="UTF-8")  
jb_data = f_jb.read()  
  
f_in = open("数据/印度.txt", "r", encoding="UTF-8")  
in_data = f_in.read()  
  
# 去除不符json规范的内容  
us_data = us_data.replace("jsonp_1629344292311_69436(", "")  
jb_data = jb_data.replace("jsonp_1629350871167_29498(", "")  
in_data = in_data.replace("jsonp_1629350745930_63180(", "")  
  
us_data = us_data[:-2]  
jb_data = jb_data[:-2]  
in_data = in_data[:-2]  
  
# json转python字典  
us_dict = json.loads(us_data)  
jb_dict = json.loads(jb_data)  
in_dict = json.loads(in_data)  
  
# 获取 trend 值  
us_trend_data = us_dict['data'][0]['trend']  
jb_trend_data = jb_dict['data'][0]['trend']  
in_trend_data = in_dict['data'][0]['trend']  
  
# 获取日期数据，用于X轴（到314下标结束）  
us_x_data = us_trend_data['updateDate'][:314]  
jb_x_data = jb_trend_data['updateDate'][:314]  
in_x_data = in_trend_data['updateDate'][:314]  
  
# 获取日期数据，用于Y轴（到314下标结束）  
us_y_data = us_trend_data['list'][0]['data'][:314]  
jb_y_data = jb_trend_data['list'][0]['data'][:314]  
in_y_data = in_trend_data['list'][0]['data'][:314]  
  
# 生成图表 - 构建折线图对象  
line = Line()  
# 添加X轴数据 - X轴是公用的，所以使用一个国家数据即可  
line.add_xaxis(us_x_data)  
# 添加Y轴数据  
line.add_yaxis("美国确诊人数", us_y_data, label_opts=LabelOpts(is_show=False))  
line.add_yaxis("日本确诊人数", jb_y_data, label_opts=LabelOpts(is_show=False))  
line.add_yaxis("印度确诊人数", in_y_data, label_opts=LabelOpts(is_show=False))  
  
# 设置全局选项  
line.set_global_opts(  
    # 标题设置  
    title_opts=TitleOpts(title="2020年美日印三国确诊人数对比折线图", pos_left="center", pos_bottom="1%"),  
)  
# 调用 render 方法,生成图表  
line.render()  
# 关闭文件对象  
f_us.close()  
f_jb.close()  
f_in.close()
```
![2020年美日印三国确诊人数对比折线图](https://hew666.github.io/self-python/学习笔记/Excalidraw/picture/2020年美日印三国确诊人数对比折线图.png)

---
### 可视化地图测试
```python
from pyecharts.charts import Map  
from pyecharts.options import VisualMapOpts  
# 准备地图对象  
map = Map()  
  
# 准备数据  
data = [  
    ("北京市", 99),  
    ("上海市", 199),  
    ("江苏省", 299),  
    ("台湾省", 399),  
    ("广东省", 499)  
]  
# 添加数据  
map.add("测试地图", data, "china")  
  
# 设置全局选项  
map.set_global_opts(  
    visualmap_opts=VisualMapOpts(  
        is_show=True,  
        is_piecewise=True,  
        pieces=[  
            {"min": 1, "max": 99, "label": "1-99", "color": "#8fb2c9"},  
            {"min": 100, "max": 199, "label": "100-199", "color": "#2486b9"},  
            {"min": 200, "max": 299, "label": "200-299", "color": "#e2e7bf"},  
            {"min": 300, "max": 399, "label": "300-399", "color": "#fa5d19"},  
            {"min": 400, "max": 499, "label": "400-499", "color": "#f2481b"},  
        ]  
  
    )  
)  
# 绘图  
map.render()
```
![可视化地图测试](https://hew666.github.io/self-python/学习笔记/Excalidraw/picture/可视化地图测试.png)

---
